# How to create AWS-Static-Website
where to get a sample aws bucket policy for a static website...
- jsfiddle.net/9y5ax0t6/ 

{
  "Id": "Policy1569048588734",
  "Version": "2012-10-17",
  "Statement": [{
    "Sid": "Stmt1569048587703",
    "Action": "s3:*",
    "Effect": "Allow",
    "Resource": "arn:aws:s3:::bucket_name/*",
    "Principal": "*"
  }]
}
------------------------------------------------------------------------------------------------------------------------------------------
where to get sample web content for your domain nme
free-css.com
steps to hosting your secure website using AWS Route 53, CloudFront & Certificate Mgr
1. download your website content from free-css.com
2. create s3 bucket for your domain name, e.g. mymuna
    - upload your web content files
    - Go to "Permission"==>Block Public Access==> Edit it to make it public
    - uncheck and save and confirm
    - scroll a little down to "Bucket Policy" ==> Edit
    - copy policy script from jsfiddle.net (refer to pre-requisites above)
    - and paste the scripts
    - change the bucket-name to your domain name (without the extension)
    - click on save and confirm website is public (see the access label in s3)
    - click on Objects==> select all uploaded files==> Action==> Make Public
    - click on the bucket name, "Properties"==> static website hosting to enable website (way down)
    - Edit==> Enable
    - Hosting Type = Host a Static Website
    - fill out the index and error documents with your website static file names
    - save and go back to see it live by clicking on the endpoint link
    - anyone you send the link would see the website
    - but notice the website is not secure and the name is not normal,,,
    - ...you want a secure www.nafeesah.ga website
    - if you do not see the website, troubleshoot, or else next step won't work
2. using route 53, create a Hosted Zone
    - hosted zone name is a container that houses your domain name records.
    - the records hold information about how to route traffic to your domain name
    - on a new url tab, filter out Route 53, click on create hosted zone
    - fill in your domain name as it is from freenom registry, e.g. mymuna.ga
    - if you want to, put in a no more than 256 xter description if you have many same name hosted zones
    - the default "Public hosted zone" is ok as we are not restricting our site to only our VPC access
    - click on create
    - observe the created NameServer (NS) and Start Of Authority (SOA)
    - for the Name Server (NS), copy out the four value/route trafiic destination servers (without the dots)
3. update your domain name in freenum nameservers
    - check the domain name you want to manage
    - click on Manage domains==>Management Tools==> Nameservers
    - check "Use custom nameservers
    - fill out the nameservers with those generated by Route 53
    - change name
4. create ssl certificate, 
    - open another url tab
    - search for "Certificate Manager"
    - we would have AWS provision our certificates since we do not have our own private certificate
    - here we would give it our domain website, it would check with freenum to confirm the site belongs to     us. that's why we created it earlier yesterday because this check could take as long as 24 hours.
    - once confirmed, AWS would apply its certificate on the site for us.
    - click on "Get started", 
    - select Request a Public certificate (the default)
    - click on request a certificate
    - fill in the domain name, e.g. mymuna.ga, by copying from freenom the exact domain name
    - click next and select default DNS as validation method
    - here AWS validates we truly own and/or control the domain name we want them to apply their certs     on. they use either DNS or send an email to the email address we registered with freenom to get the     domain name. we would use the default DNS option
    - add tags if you so desire
    - review, confirm and request, continue
    - while it is pending validation...
    - locate and expand the domain name, in this case mymuna.ga
    - click on "Create record in Route 53"
    - "create record in route 53" pops up
    - click on create
    - refresh the page, keep refreshing the page from time to time...
    - ...depending on your bandwidth it can take upto 30 minutes or more for AWS to validate the domain        and issue certificate
    - confirm the STATUS of the certificte has changed to ISSUED
5. create a cloudfront distribution. at this point, we want to push our website content to all of AWS edge locations around the world for easy and fast accessing of our web contents.
There are two content delivery methods for the two distribution types (Web and RTMP), viz:-
1. Web distribution - (from AWS console)
Create a web distribution if you want to:
- Speed up distribution of static and dynamic content, for example, .html, .css, .php, and graphics files.
- Distribute media files using HTTP or HTTPS.
- Add, update, or delete objects, and submit data from web forms.
- Use live streaming to stream an event in real time.
You store your files in an origin - either an Amazon S3 bucket or a web server. After you create the distribution, you can add more origins to the distribution.
2. RTMP distribution
Create an RTMP distribution to speed up distribution of your streaming media files using Adobe Flash Media Server's RTMP protocol. An RTMP distribution allows an end user to begin playing a media file before the file has finished downloading from a CloudFront edge location. Note the following:
To create an RTMP distribution, you must store the media files in an Amazon S3 bucket.
To use CloudFront live streaming, create a web distribution.
CloudFront is discontinuing support for RTMP distributions on December 31, 2020. For more information, please read the announcement.
-------------------------------------------------------------------------------------------------------------------------------------------------
create a cloudfront distribution
    - click on create distribution
    - "Select a delivery method for your content"
    - Under Web distribution, click on get started
    - for the "Origin Domain Name field, copy the tested functional link by...
    - go to S3, bucket name==> Property==> scroll down down to "static website hosting"==>      Bucket website Endpoint
    - copy the link excluding the http://
    - go back to cloudfront and paste it in the field for Origin Domain Name
    - under Default Cache Behaviour Settings==> viewer protocol policy
    - check Redirect HTTP to HTTPS (this would make our website secure)
    - scroll down to Distribution settings==> Alternate Domain Name (Cname)
    - type in the domain name e.g. mymuna.ga from freenum
    - then for SSL Certificate, check on "Custom SSL Certificate"
    - select the issued certificate
    - scroll to the bottom amd click on "Create Distribution"
    - it could take about 40 minutes for the status to change to "Deployed", depending on your bandwidth
    - keep refreshing until it is deployed
    - copy the domain name under "Domain Name" tab
    - paste it into a browser url, you should be able to see your website, i.e. if the status has changed to DEPLOYED
    - but that is not the correct website name or the name we would like to use
6. Go to Route 53
    - click on hosted zone
    - check on your domain name, e.g. mymuna.ga
    - click on "Create Record Set"
    - leave the "Record name" field empty
    - leave the Type as it is (A - Route traffic to an IPv4 adress...)
    - Alias = Yes
    - Alias Target = CloudFront Distribution
    - confirm the popped up AZ is correct (should be anyway)
    - select the CloudFront domain name (e.g. xxxxxxx.cloudfront.net, i.e. the scrambled name under the...
       tab DOMAIN NAME where the certificate was issued and deployed, i.e. if the name didn't pop up) 
    - click on create button
6. It's done. You can now access your website on your laptop, pc, mobile phone, anywhere as, say, mymuna.ga
7. When you are done...
    Delete your route 53 Hosted Zone to avoid $0.50 debit charge per hour, i.e...
    - first delete the A and CNAME records, then...
    - delete the zone
    - delete the cloudfront endpoint
    - delete the certificate issued
{
  "Id": "Policy1569048588734",
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "Stmt1569048587703",
      "Action": "s3:*",
      "Effect": "Allow",
      "Resource": "arn:aws:s3:::bucket_name/*",
      "Principal": "*"
    }
  ]
}




